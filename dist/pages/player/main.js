require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([9],{MutD:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n("5nAL"),r=n.n(e),s=n("jNJO");new r.a(s.a).$mount()},ScYi:function(t,i,n){"use strict";var e=n("Dd8w"),r=n.n(e),s=n("NYxO"),a=n("OKJt"),c=n.n(a);i.a={components:{},data:function(){return{rank:[],currentTime:0,duration:0,percent:0,left:0,btn:{},dt:0,Time:0,query:"",progressWidth:0,currentLyric:"",playingLyric:"",currentLineNum:0,scroll_id:"scroll0",scroll:"scroll",offLeft:0,currentScroll:!1,toggleplaying:!1}},computed:r()({playicon:function(){return this.playing?"flaticon-pause":"flaticon-play-button"},taggle:function(){return{}}},Object(s.b)(["playlist","currentIndex","currentSong","playing"])),methods:r()({toggleying:function(){this.toggleplaying=!this.toggleplaying},opencomment:function(){this.setcomment(this.currentSong.id);wx.navigateTo({url:"../comment/main"})},Touchstart:function(t){this.currentScroll=!0},TouchEnd:function(t){this.currentScroll=!1},seek:function(t){this.touch.percent=(t.touches[0].pageX-this.offLeft-6)/this.progressWidth;var i=this.touch.percent*this.duration;this.backgroundAudioManager.seek(i),this.currentLyric.seek(1e3*i)},getLyric:function(){var t=this;this.currentSong.getLyric().then(function(i){t.currentLyric=new c.a(i,t.handleLyric),t.currentLyric.play();var n=t.currentSong;t.percent=0,t.left=0,t.duration=n.duration/1e3,t.dt=t.format(t.duration),t.backgroundAudioManager.title=n.name,t.backgroundAudioManager.name=n.name,t.backgroundAudioManager.singer=n.singer,t.backgroundAudioManager.coverImgUrl=n.image,t.backgroundAudioManager.src=n.url}).catch(function(){t.currentLyric=null,t.currentLineNum=0,t.playingLyric=""})},next:function(){var t=0;if(this.currentIndex>=this.playlist.length)return t=0,void this.setPlayindex(t);this.setPlayindex(t+1)},prve:function(){var t=0;if(0===this.currentIndex)return t=this.playlist.length,void this.setPlayindex(t);t--,this.setPlayindex(t)},changplaying:function(){this.setplaying(!this.playing)},handleLyric:function(t){var i=t.lineNum,n=t.txt;this.currentLineNum=i,i>6&&this.currentScroll||(this.scroll_id=this.scroll+(i-5),this.playingLyric=n)}},Object(s.c)({setplayid:"SET_PLAYID",setPlayindex:"SET_CURRENT_INDEX",setplaying:"SET_PLAYING",setcomment:"SET_COMMENTID"}),{format:function(t){return((t|=0)/60|0)+":"+this._pad(t%60)},_pad:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t.toString().length;n<i;)t="0"+t,n++;return t},play:function(){this.setplaying(!this.playing),this.getLyric()},offset:function(t){var i=this;!i.progressWidth>0&&(this.query=wx.createSelectorQuery(),this.query.select("#box").boundingClientRect(function(t){i.progressWidth=t.width-t.left,i.offLeft=t.left+12}).exec()),i.left=t*(i.progressWidth-6)}}),created:function(){var t=this;this.touch={},this.backgroundAudioManager=wx.getBackgroundAudioManager(),this.backgroundAudioManager.onTimeUpdate(function(i){t.currentTime=t.backgroundAudioManager.currentTime,t.Time=t.format(t.currentTime)}),this.backgroundAudioManager.onPlay(function(t){}),this.backgroundAudioManager.onEnded(function(i){t.next()})},watch:{playing:function(t,i){t?this.backgroundAudioManager.play():this.backgroundAudioManager.pause()},currentSong:function(t,i){t!==i&&(this.currentLyric&&(this.scroll_id="scroll0",this.currentLyric.stop()),this.play())},currentTime:function(t,i){this.percent=t/this.duration*100,this.offset(t/this.duration)}}}},jHGJ:function(t,i){},jNJO:function(t,i,n){"use strict";var e=n("ScYi"),r=n("vw5L");var s=function(t){n("jHGJ")},a=n("ybqe")(e.a,r.a,s,null,null);i.a=a.exports},vw5L:function(t,i,n){"use strict";var e={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"player-detail"},[n("div",{staticClass:"background"},[n("img",{attrs:{src:t.currentSong.image,alt:""}})]),t._v(" "),n("div",{staticClass:"player-hender"},[n("p",[t._v(t._s(t.currentSong.name))]),t._v(" "),n("p",{staticClass:"player-singer"},[t._v(t._s(t.currentSong.singer))])],1),t._v(" "),n("div",{staticClass:"player-wrapper",attrs:{eventid:"0"},on:{touchstart:t.Touchstart,touchend:t.TouchEnd,click:t.toggleying}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.toggleplaying,expression:"toggleplaying"}],staticClass:"player-cd"},[n("img",{attrs:{src:t.currentSong.image,alt:""}})]),t._v(" "),n("scroll-view",{directives:[{name:"show",rawName:"v-show",value:!t.toggleplaying,expression:"!toggleplaying"}],staticClass:"scroll-lyric",staticStyle:{width:"100%",height:"100%"},attrs:{"scroll-y":"","scroll-into-view":t.scroll_id,"scroll-with-animation":"true"}},[n("div",{staticClass:"Lyric"},t._l(t.currentLyric.lines,function(i,e){return n("p",{key:e,class:{current:t.currentLineNum===e},attrs:{id:t.scroll+e}},[t._v(t._s(i.txt))])}))])],1),t._v(" "),n("div",{staticClass:"player-buttom"},[n("div",{staticClass:"buttom-hender"},[n("div",{staticClass:"comment"},[n("div",{staticClass:"comment-icon",attrs:{eventid:"1"},on:{click:t.opencomment}},[n("i",{staticClass:"flaticon-menu"})],1)])]),t._v(" "),n("div",{staticClass:"progress-bar-wrapper"},[n("div",{staticClass:"progress-btn"},[n("p",[t._v(t._s(t.Time))]),t._v(" "),n("div",{staticClass:"progress-inner"},[n("div",{staticClass:"progressBtn",style:{left:t.left+"px"},attrs:{animation:t.btn}}),t._v(" "),n("progress",{attrs:{percent:t.percent,"stroke-width":"3",backgroundColor:"#888",activeColor:"#ff3326",id:"box",eventid:"2"},on:{click:t.seek}})],1),t._v(" "),n("p",[t._v(t._s(t.dt))])],1)]),t._v(" "),n("div",{staticClass:"operators"},[n("div",{staticClass:"player-icon"},[n("i",{staticClass:"flaticon-loop"})],1),t._v(" "),n("div",{staticClass:"player-icon",attrs:{eventid:"3"},on:{click:t.pevr}},[n("i",{staticClass:"flaticon-next-1"})],1),t._v(" "),n("div",{staticClass:"player-icon",attrs:{eventid:"4"},on:{click:t.changplaying}},[n("i",{class:t.playicon})],1),t._v(" "),n("div",{staticClass:"player-icon",attrs:{eventid:"5"},on:{click:t.next}},[n("i",{staticClass:"flaticon-next"})],1),t._v(" "),n("div",{staticClass:"player-icon"},[n("i",{staticClass:"flaticon-list"})],1)])])])},staticRenderFns:[]};i.a=e}},["MutD"]);